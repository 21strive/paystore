syntax = "proto3";

package paystore;

option go_package = "./protos";

service Paystore {
  rpc CreateBalance (CreateBalanceRequest) returns (CreatedResponse);
  rpc CreatePayment (CreatePaymentRequest) returns (CreatedResponse);
  rpc FinalizedPayment (FinalizedPaymentRequest) returns (EmptyResponse);
  rpc CreateWithdraw (CreateWithdrawRequest) returns (CreatedResponse);
  rpc FinalizedWithdraw (FinalizedWithdrawRequest) returns (EmptyResponse);
}

message CreateBalanceRequest {
  string ExternalID = 1;
  string OrganizationSlug = 2;
  string Currency = 3;
}

message CreatePaymentRequest {
  string AccountUUID = 1;
  int64 Amount = 2;
  string VendorRecordId = 3;
}

message FinalizedPaymentRequest {
  string AccountUUID = 1;
  string PaymentUUID = 2;
  PaymentStatus PaymentStatus = 3;
}

message CreateWithdrawRequest {
  string AccountUUID = 1;
  int64 amount = 2;
  string VendorRecordId = 3;
}

message FinalizedWithdrawRequest {
  string AccountUUId = 1;
  string WithdrawUUID = 2;
  PaymentStatus WithdrawStatus = 3;
}

message CreatedResponse {
  string ID = 1;
}

message EmptyResponse {}

enum PaymentStatus {
  PAYMENT_STATUS_UNSPECIFIED = 0;  // Required by protobuf style guide
  PAYMENT_STATUS_PENDING = 1;
  PAYMENT_STATUS_PAID = 2;
  PAYMENT_STATUS_FAILED = 3;
}